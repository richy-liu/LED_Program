<!DOCTYPE html><html>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/spectrum/1.8.0/spectrum.min.js"></script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/spectrum/1.8.0/spectrum.min.css">

<!-- <head> -->
<title>LED Controller</title>

<!-- <style type=\"text/css\">
	.form-control {
	 width:55px;
	}
</style> -->
<!-- </head> -->
<!-- <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css'> -->
<!-- <FONT SIZE=-1> -->

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<h1 class="text-muted">LED Strip Controller</h1>

<!-- <button onclick="sendPreset1()" style="width: 150px;">Click me</button><br><br> -->
<p><a href=\"?preset=preset%d\"><button style=\"width: 150px;\">Preset 1</button></a><br></p>

<br><br>

<input type="text" id="setColour" />

<br><br><br>

<div class="slidecontainer">
    <p>Speed: <span id="speedSpan"></span></p>
    <input type="range" min="0" max="100" value="50" class="slider" id="speedRange">
    <p>Brightness: <span id="brightnessSpan"></span></p>
    <input type="range" min="0" max="100" value="50" class="slider" id="brightnessRange">
</div>

<script>
	function sendPreset1() {
		// var xhttp = new XMLHttpRequest();
		// xhttp.open("GET", "preset?preset=Preset1", true);
		// xhttp.send();
		console.log("pressed");
	}

	$(document).ready(function() {
		$("#setColour").spectrum( {
	      move: function() {
	        o = $("#setColour").spectrum("get");
	        h = parseFloat(o._originalInput.h)*256/100;
	        s = parseFloat(o._originalInput.s)*255/100;
	        v = parseFloat(o._originalInput.v)*255/100;
			window.colour = "hsv?h=" + Math.round(h) + "&s=" + Math.round(s) + "&v=" + Math.round(v);
	        // console.log(window.colour);
	      },
	      color: "#f00",
	      showInput: true,
		  showButtons: false
		});
	});

	var speedSlider = document.getElementById("speedRange");
	var speedValue = document.getElementById("speedSpan");
	speedValue.innerHTML = speedSlider.value;

	speedSlider.oninput = function() {
		speedValue.innerHTML = this.value;
		window.speed = "speed?speed=" + parseFloat(this.value);
		// console.log(window.speed);
	}

	var brightnessSlider = document.getElementById("brightnessRange");
	var brightnessValue = document.getElementById("brightnessSpan");
	brightnessValue.innerHTML = brightnessSlider.value;

	brightnessSlider.oninput = function() {
		brightnessValue.innerHTML = this.value;
		window.brightness = "brightness?brightness=" + parseFloat(this.value);
	}

	window.lastColour = window.colour;
	window.lastSpeed = window.speed;
	window.lastBrightness = window.brightness;

	var intervalID = window.setInterval(SendMessage, 100);

	function SendMessage() {
		// var xhttp = new XMLHttpRequest();

		if (window.lastColour != window.colour) {
			window.lastColour = window.colour;
			// var xhttp = new XMLHttpRequest();
			// xhttp.open("GET", window.lastColour, true);
			// xhttp.send();
			console.log(window.lastColour);
		}
		if (window.lastSpeed != window.speed) {
			window.lastSpeed = window.speed;
			// var xhttp = new XMLHttpRequest();
			// xhttp.open("GET", window.lastSpeed, true);
			// xhttp.send();
			// console.log(window.speed);
			console.log(window.lastSpeed);
		}
		if (window.lastBrightness != window.brightness) {
			window.lastBrightness = window.brightness;
			// var xhttp = new XMLHttpRequest();
			// xhttp.open("GET", window.lastBrightness, true);
			// xhttp.send();
			console.log(window.lastBrightness);
		}
	}
</script>

<!-- <input type="text" id="setColour" />

<br><br><br>

<div class="slidecontainer">
    <p>Speed: <span id="speedSpan"></span></p>
    <input type="range" min="0" max="100" value="50" class="slider" id="speedRange">
    <p>Brightness: <span id="brightnessSpan"></span></p>
    <input type="range" min="0" max="100" value="50" class="slider" id="brightnessRange">
</div> -->

<!-- <script>
    var speedSlider = document.getElementById("speedRange");
    var speedValue = document.getElementById("speedSpan");
    speedValue.innerHTML = speedSlider.value;

    speedSlider.oninput = function() {
        speedValue.innerHTML = this.value;
		window.speed = "speed?speed=" + parseFloat(this.value);
		// console.log(window.speed);
    }

    var brightnessSlider = document.getElementById("brightnessRange");
    var brightnessValue = document.getElementById("brightnessSpan");
    brightnessValue.innerHTML = brightnessSlider.value;

    brightnessSlider.oninput = function() {
        brightnessValue.innerHTML = this.value;
		window.brightness = "brightness?brightness=" + parseFloat(this.value);
    }

	window.lastColour = window.colour;
	window.lastSpeed = window.speed;
	window.lastBrightness = window.brightness;

	var intervalID = window.setInterval(SendMessage, 100);

	function SendMessage() {
		// var xhttp = new XMLHttpRequest();

		if (window.lastColour != window.colour) {
			window.lastColour = window.colour;
			// var xhttp = new XMLHttpRequest();
			// xhttp.open("GET", window.lastColour, true);
			// xhttp.send();
			console.log(window.lastColour);
		}
		if (window.lastSpeed != window.speed) {
			window.lastSpeed = window.speed;
			// var xhttp = new XMLHttpRequest();
			// xhttp.open("GET", window.lastSpeed, true);
			// xhttp.send();
			// console.log(window.speed);
			console.log(window.lastSpeed);
		}
		if (window.lastBrightness != window.brightness) {
			window.lastBrightness = window.brightness;
			// var xhttp = new XMLHttpRequest();
			// xhttp.open("GET", window.lastBrightness, true);
			// xhttp.send();
			console.log(window.lastBrightness);
		}
	}
</script> -->
</html>
